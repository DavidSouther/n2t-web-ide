"use strict";(self.webpackChunk_nand2tetris_web=self.webpackChunk_nand2tetris_web||[]).push([[458],{7638:function(t,e,n){n.r(e),n.d(e,{CPU:function(){return y},default:function(){return R}});var s=n(2951),r=n(1976),a=n(7591),i=n(4337),c=n(1026),u=n(8923),l=n(2450),o=n(9613),d=n(2277),p=n(5838),h=new Int16Array([2,55944,0,64528,15,54018,1,64528,2,61584,54024,0,64648,2,55943,15,55943]),f=n(4499),x=n(6167),b=n(7559),m=n(8698),v=n(5029);function j(t,e){var n=new v.j(t.cpu.RAM,e),s=new v.j(t.cpu.ROM,e),r=new v.j(t.cpu.Screen,e),a=new p.qT(new v.j(t.cpu.RAM,e));return{A:t.cpu.A,D:t.cpu.D,PC:t.cpu.PC,RAM:n,ROM:s,Screen:r,Keyboard:a}}function g(){var t=(0,x.useContext)(m.r),e=t.fs,n=t.setStatus,s=t.storage,r=(0,x.useRef)((function(){})),a=(0,x.useMemo)((function(){return function(t,e,n,s){var r,a=new f.o(new p.eD(h)),i=!1,c={update:function(t){var e;t.sim=j(a,s),t.test.useTest=i,t.test.highlight=null===(e=a.currentStep)||void 0===e?void 0:e.span}},u={tick:function(){i?a.step():a.cpu.tick()},resetRAM:function(){a.cpu.RAM.loadBytes([]),s.current({action:"update"}),e("Reset RAM")},toggleUseTest:function(){i=!i,s.current({action:"update"})},resetCPU:function(){a.reset(),s.current({action:"update"}),e("Reset CPU")},reset:function(){this.resetRAM(),this.resetCPU(),e("Reset CPU & RAM")}};return{initialState:{sim:j(a,s),test:{useTest:i,highlight:null===(r=a.currentStep)||void 0===r?void 0:r.span}},reducers:c,actions:u}}(0,n,0,r)}),[e,n,s,r]),i=a.initialState,u=a.reducers,l=a.actions,o=(0,b.C)(u,i),d=(0,c.Z)(o,2),v=d[0],g=d[1];return r.current=g,{state:v,dispatch:r,actions:l}}var k=n(6398),C=n(1124),Z=n(7878),y=function(){var t=g(),e=t.state,n=t.actions,p=t.dispatch,h=(0,x.useState)("repeat {\n\tticktock;\n}"),f=(0,c.Z)(h,2),b=f[0],m=f[1],v=(0,x.useState)(""),j=(0,c.Z)(v,2),y=j[0],R=j[1],w=(0,x.useState)(""),M=(0,c.Z)(w,2),A=M[0],P=M[1],S=(0,x.useRef)();return(0,x.useEffect)((function(){return S.current=new(function(t){(0,a.Z)(c,t);var e=(0,i.Z)(c);function c(){return(0,s.Z)(this,c),e.apply(this,arguments)}return(0,r.Z)(c,[{key:"tick",value:function(){return n.tick(),!1}},{key:"finishFrame",value:function(){p.current({action:"update"})}},{key:"reset",value:function(){n.reset()}},{key:"toggle",value:function(){p.current({action:"update"})}}]),c}(u.B)),function(){var t;null===(t=S.current)||void 0===t||t.stop()}}),[n,p]),(0,Z.jsxs)("div",{className:"Page CpuPage grid",children:[(0,Z.jsx)(l.ZP,{name:"ROM",memory:e.sim.ROM,highlight:e.sim.PC,format:"asm",editable:!1}),(0,Z.jsx)(l.ZP,{name:"RAM",memory:e.sim.RAM,format:"hex"}),(0,Z.jsxs)(C.s,{className:"IO",children:[(0,Z.jsx)("div",{children:(0,Z.jsxs)("label",{children:[(0,Z.jsx)("input",{type:"checkbox",onChange:n.toggleUseTest,checked:e.test.useTest,role:"switch"}),"Use Test Script"]})}),(0,Z.jsx)(o.l,{memory:e.sim.Screen}),(0,Z.jsx)(d.N,{keyboard:e.sim.Keyboard}),(0,Z.jsx)("div",{children:(0,Z.jsxs)("dl",{children:[(0,Z.jsx)("dt",{children:"PC"}),(0,Z.jsx)("dd",{children:e.sim.PC}),(0,Z.jsx)("dt",{children:"A"}),(0,Z.jsx)("dd",{children:e.sim.A}),(0,Z.jsx)("dt",{children:"D"}),(0,Z.jsx)("dd",{children:e.sim.D})]})})]}),(0,Z.jsx)(k.F,{disabled:!e.test.useTest,runner:S,tst:[b,m,e.test.highlight],out:[y,R],cmp:[A,P]})]})},R=y},6398:function(t,e,n){n.d(e,{F:function(){return m}});var s=n(1092),r=n(7791),a=n(1026),i=n(8061),c=n(6167),u=n(8582),l=n(258),o=n(8365),d=n(8698),p=n(9647),h=n(8016),f=n(1539),x=n(1124),b=n(7878),m=function(t){var e=t.runner,n=(0,a.Z)(t.tst,3),m=n[0],v=n[1],j=n[2],g=(0,a.Z)(t.cmp,2),k=g[0],C=g[1],Z=(0,a.Z)(t.out,1)[0],y=t.disabled,R=void 0!==y&&y,w=(0,c.useContext)(d.r),M=w.fs,A=w.setStatus,P=(0,c.useContext)(h.Il),S=P.filePicker,T=P.tracking,F=(0,c.useState)("tst"),U=(0,a.Z)(F,2),D=U[0],N=U[1],O=(0,c.useCallback)((function(t){N(t),T.trackEvent("tab","change",t)}),[T]),_=(0,c.useCallback)((0,r.Z)((0,s.Z)().mark((function t(){var e,n;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S.select();case 3:return e=t.sent,t.next=6,M.readFile(e);case 6:n=t.sent,v(n),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.error(t.t0),A("Failed to load test");case 14:case"end":return t.stop()}}),t,null,[[0,10]])}))),[S,A,M]);return(0,b.jsx)(x.s,{className:"_test_panel",header:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"flex-0",children:(0,b.jsx)(i.cC,{id:"Test"})}),(0,b.jsx)("div",{className:"flex-1",children:e.current&&(0,b.jsx)(l.D,{runner:e.current})}),(0,b.jsx)("div",{children:(0,b.jsx)("fieldset",{role:"group",children:(0,b.jsx)("button",{onClick:_,children:"\ud83d\udcc2"})})})]}),children:(0,b.jsxs)("div",{role:"tablist",style:{"--tab-count":"3"},children:[(0,b.jsx)("div",{role:"tab",id:"test-tab-tst","aria-controls":"test-tabpanel-tst","aria-selected":"tst"===D,children:(0,b.jsxs)("label",{children:[(0,b.jsx)("input",{type:"radio",name:"test-tabs","aria-controls":"test-tabpanel-tst",value:"tst",checked:"tst"===D,onChange:function(){return O("tst")}}),"Test Script"]})}),(0,b.jsx)("div",{role:"tabpanel","aria-labelledby":"test-tab-tst",id:"test-tabpanel-tst",children:(0,b.jsx)(f.M,{value:m,onChange:v,grammar:p.qH.parser,language:"tst",highlight:j,disabled:R})}),(0,b.jsx)("div",{role:"tab",id:"test-tab-cmp","aria-controls":"test-tablpanel-cmp","aria-selected":"cmp"===D,children:(0,b.jsxs)("label",{children:[(0,b.jsx)("input",{type:"radio",name:"test-tabs","aria-controls":"test-tabpanel-cmp",value:"cmp",checked:"cmp"===D,onChange:function(){return O("cmp")}}),"Compare File"]})}),(0,b.jsx)("div",{role:"tabpanel","aria-labelledby":"test-tab-cmp",id:"test-tabpanel-cmp",style:{position:"relative"},children:(0,b.jsx)(f.M,{value:k,onChange:C,grammar:o.lA.parser,language:"cmp",disabled:R})}),(0,b.jsx)("div",{role:"tab",id:"test-tab-out","aria-controls":"test-tabpanel-out","aria-selected":"out"===D,children:(0,b.jsxs)("label",{children:[(0,b.jsx)("input",{type:"radio",name:"test-tabs","aria-controls":"test-tabpanel-out",value:"out",checked:"out"===D,onChange:function(){return O("out")}}),"Output File"]})}),(0,b.jsx)("div",{role:"tabpanel",id:"test-tabpanel-out","aria-labelledby":"test-tab-out",children:(0,b.jsx)(u.M,{cmp:k,out:Z})})]})})}},5029:function(t,e,n){n.d(e,{j:function(){return h}});var s=n(1092),r=n(7791),a=n(2951),i=n(1976),c=n(7169),u=n(3243),l=n(7597),o=n(7591),d=n(4337),p=n(4649),h=function(t){(0,o.Z)(n,t);var e=(0,d.Z)(n);function n(t,s){var r;return(0,a.Z)(this,n),r=e.call(this,t,t.size,0),(0,p.Z)((0,c.Z)(r),"dispatch",void 0),r.dispatch=s,r}return(0,i.Z)(n,[{key:"load",value:function(){var t=(0,r.Z)((0,s.Z)().mark((function t(e,r){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.Z)((0,l.Z)(n.prototype),"load",this).call(this,e,r);case 2:this.dispatch.current({action:"update"});case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()}]),n}(n(5838).kG)}}]);
//# sourceMappingURL=458.138ddf44.chunk.js.map